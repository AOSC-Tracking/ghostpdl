
Tue Jan  2 14:04:44 MST 2007

The gslite library temporarily requires a patch to gs/src.  See 
"Patch for ghostscript" attached below.

Build and test gslite library with Microsoft Visual Studio 8 with
Microsoft Platform SDK for Windows Server 2003 R2.

   # install the free visual C++ 2005 and SDK.
   # modify vsvars32.bat so visual c can find the SDK (vsvars32.bat
   # patch below) and open the Visual Studio 2005 command prompt.
   # go to the gslite directory
   cd tools\gslite
   # build the library see DEBUG options in the makefile
   make /f gslt_lib_msvc.mak DEVSTUDIO=
   # build and run the the test files.
   make /f gslt_lib_msvc.mak test

build and test gslite library with Linux 2.6.12 and gcc version 3.4.4 20050721 (Red Hat 3.4.4-2)

   # go to the glite directory and build the library.
   make -f gslt_lib_gcc.mak
   # test the library.
   make test

Note the linux makefile supports a threads test
(gslt_image_threads_test), it is the same as gslt_image_test except it
tests rendering 2 images in 2 concurrent threads of execution.  To get
this to run on windows wouuld require installing POSIX threads.


vsvars32.bat patch
------------------
--- vsvars32.bat	2006-12-27 23:48:11.578125000 -0700
+++ vsvars32.bat.bak	2006-12-27 21:14:42.312500000 -0700
@@ -14,8 +14,8 @@
 @set DevEnvDir=C:\Program Files\Microsoft Visual Studio 8\Common7\IDE
 
 @set PATH=C:\Program Files\Microsoft Visual Studio 8\Common7\IDE;C:\Program Files\Microsoft Visual Studio 8\VC\BIN;C:\Program Files\Microsoft Visual Studio 8\Common7\Tools;C:\Program Files\Microsoft Visual Studio 8\SDK\v2.0\bin;C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727;C:\Program Files\Microsoft Visual Studio 8\VC\VCPackages;%PATH%
-@set INCLUDE=C:\Program Files\Microsoft Visual Studio 8\VC\INCLUDE;%INCLUDE%;C:\Program Files\Microsoft Platform SDK for Windows Server 2003 R2\Include
-@set LIB=C:\Program Files\Microsoft Visual Studio 8\VC\LIB;C:\Program Files\Microsoft Visual Studio 8\SDK\v2.0\lib;%LIB%;C:\Program Files\Microsoft Platform SDK for Windows Server 2003 R2\Lib
+@set INCLUDE=C:\Program Files\Microsoft Visual Studio 8\VC\INCLUDE;%INCLUDE%
+@set LIB=C:\Program Files\Microsoft Visual Studio 8\VC\LIB;C:\Program Files\Microsoft Visual Studio 8\SDK\v2.0\lib;%LIB%
 @set LIBPATH=C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727
 
 @goto end


Patch for ghostscript
---------------------

svn diff
Index: gs.mak
===================================================================
--- gs.mak	(revision 7517)
+++ gs.mak	(working copy)
@@ -377,7 +377,7 @@
  $(DEVICE_DEVS10) $(DEVICE_DEVS11) $(DEVICE_DEVS12) $(DEVICE_DEVS13) \
  $(DEVICE_DEVS14) $(DEVICE_DEVS15) $(DEVICE_DEVS16) $(DEVICE_DEVS17) \
  $(DEVICE_DEVS18) $(DEVICE_DEVS19) $(DEVICE_DEVS20) $(DEVICE_DEVS21) \
- $(DEVICE_DEVS_EXTRA) $(PSD)romfs$(COMPILE_INITS).dev 
+ $(DEVICE_DEVS_EXTRA)
 
 devs_tr=$(GLGENDIR)$(D)devs.tr
 $(devs_tr) : $(GS_MAK) $(TOP_MAKEFILES) $(ECHOGS_XE)
@@ -407,7 +407,6 @@
 	$(EXP)$(ECHOGS_XE) -a $(devs_tr) -+ $(DEVICE_DEVS20)
 	$(EXP)$(ECHOGS_XE) -a $(devs_tr) -+ $(DEVICE_DEVS21)
 	$(EXP)$(ECHOGS_XE) -a $(devs_tr) -+ $(DEVICE_DEVS_EXTRA)
-	$(EXP)$(ECHOGS_XE) -a $(devs_tr) -+ $(PSD)romfs$(COMPILE_INITS).dev
 	$(EXP)$(ECHOGS_XE) -a $(devs_tr) - $(GLGENDIR)$(D)libcore
 
 # GCONFIG_EXTRAS can be set on the command line.
@@ -423,7 +422,7 @@
 
 $(gconfig_h) : $(ld_tr)
 	$(NO_OP)
-	
+
 # The line above is an empty command; don't delete.
 
 # save our set of makefile variables that are defined in every build (paths, etc.)
Index: sjpegc.c
===================================================================
--- sjpegc.c	(revision 7517)
+++ sjpegc.c	(working copy)
@@ -34,7 +34,6 @@
   unix-aux.mak, and written to gconfig_.h
  */
 
-#include "gconfig_.h"
 #ifdef DONT_HAVE_JMEMSYS_H
