   Copyright (C) 1997 Aladdin Enterprises.  All rights reserved.
   Unauthorized use, copying, and/or distribution prohibited.

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

This file, NEWS-PL, describes the changes in the most recent releases of
Aladdin's library code that is shared between PCL5, HP-GL/2, HP RTL, and PCL
XL, in reverse chronological order.

Version 1.33 (04/22/00)
=======================

Sat Apr 22 07:00:00 2000 GMT        Henry Stiles    henrys@artifex.com

        * plmain.c [1.23]:
        did not properly return to pjl and stdin was not handled properly.
        

Tue Mar 14 19:00:00 2000 GMT        Henry Stiles    henrys@artifex.com

        * plmain.c [1.22]:
        flushing to end of job was not working correctly.
        

Fri Feb 18 03:00:00 2000 GMT        Henry Stiles    henrys@artifex.com

        * pltop.h [1.3], plmain.c [1.21], pjparsei.c [1.4], pjparse.h [1.8], 
        pjparse.c [1.11]:
        Adds pjl "ENTER LANGUAGE" functionality.  PCL or XL can now be
        selected on the command line with the -L switch, through the PJL enter
        language command or by auto sensing.  The command line switch
        overrides the PJL ENTER LANGUAGE command which overrides auto sensing.
        

Thu Feb 17 05:00:00 2000 GMT        Henry Stiles    henrys@artifex.com

        * pltop.h [1.2], pltop.c [1.3], plmain.c [1.20], pjparsei.c [1.3]:
        Changes for language switching, auto sensing, better memory
        management, and simpler build system.  This code is ALPHA and is
        expected to change a bit over the next few weeks.
        

Fri Feb  4 06:00:00 2000 GMT        Henry Stiles    henrys@artifex.com

        * plmain.c [1.19]:
        removes obsolete comment.
        

Tue Jan 11 06:00:00 2000 GMT        Henry Stiles    henrys@artifex.com

        * NEWS-PL [1.12]:
        Updated for pcl and XL release 1.32.
        

Version 1.32 (01/11/00)
=======================

Wed Jan  5 04:00:00 2000 GMT        Henry Stiles    henrys@artifex.com

        * plmain.c [1.18]:
        removes an unnecessary compilation directive.
        
        * pjparse.c [1.10]:
        The PJL parser does not correctly handle side effects amongst PJL
        variables.  This change simply adds one effect to correctly print a
        customer file.  Changing the ORIENTATION variable automatically
        updates the FORMLINES variable.  There are other side effects that
        should be implemented and tested (todo).
        

Sun Dec 12 23:00:00 1999 GMT        Henry Stiles    henrys@artifex.com

        * plchar.c [1.10]:
        The actual bold fraction used on HP printers is larger than the
        expected value from the specification - we now emulate the HP printers
        (C311.bin, T311.bin and other test files.  Also, the unusual passing
        of the bold fraction between pxl and the font machinery (through
        WMode) is now more accurate.
        

Tue Nov  2 04:00:00 1999 GMT        Henry Stiles    henrys@artifex.com

        * plfont.c [1.7], plchar.c [1.9]:
        Better handling of undefined glyphs.  In particular pcl prints a space
        for undefined characters - so it is most convenient for the font
        machinery to return an undefined glyph code instead of rendering the 0
        glyph (the rectangle) when a glyph is undefined.  TODO: needs to be
        tested with XL.
        

Fri Oct 15 05:00:00 1999 GMT        Henry Stiles    henrys@artifex.com

        * plmain.c [1.17]:
        device parameters derived from the command line were being sent to an
        already open device, we now apply these parameters before the device
        is open.
        

Tue Oct  5 18:00:00 1999 GMT            ray@artifex.com

        * pjtop.h [1.2], pjparse.h [1.7]:
        Fix non-standard comment after #endif to use /* */ - prevent warnings
        

Tue Oct  5 04:00:00 1999 GMT        Henry Stiles    henrys@artifex.com

        * plchar.c [1.8]:
        adds (void *) casts for some font related function to avoid the work
        of (1) finding a reasonable set of include files for plchar.c and (2)
        the indirectly related problem of derefencing pointers to the graphics
        state whose type definition should be opaque.
        

Sun Oct  3 08:00:00 1999 GMT        Henry Stiles    henrys@artifex.com

        * plmain.c [1.16], plfont.c [1.6], plchar.c [1.7]:
        This is the first gs593 integration it is *NOT* a release.  Normally
        each file is checked in with an associated log entry, in order to
        check in all of the code simultaneously we batch all of the file
        name's modified and change descriptions here (Note: Aladdin code changes
        are documented in gs/doc/News.htm)
        
        - pcstate.h - removes show enumeration from pcl state.
        - pctop.c, pxtop.c
        	- gs_grestore_no_wraparound()'s is now gs_grestore_only().
        - pxgstate.c
                - ENUM_RETURN_CONST_STRING_PTR() now takes a gs string
        	  argument instead of the string's data as it did
                  previously.
        - plmain.c -
        	- The library no longer initializes io devices.  Adds
        	  gs_iodev_init() to main() procedure.  Also, gs_c_param_list_rewrite()
        	  is renamed to gs_c_param_list_write_more().
        - pcltop.mak - adds pipe.dev for operating system pipe support.
        - pctext.c, pglabel.c, pxfont.c, plfont.c
           - extensive modifications to support the text api (gstext.h)
        	- use gs_text_enum_t instead of gs_show_enum.
        	- removes enumeration allocation, this is now done by the text
                  "begin" functions.
        	- update "next_char" procs and "encode char" procs to take a
        	  glyph argument and the character argument is now passed by value
                  (pcl nor xl make use of the glyph argument).
        	- char_path_n_init() replaced with gs_charpath_begin().
        	- gs_show_n_init() replaced with gs_show_begin().
        	- gs_show_next() is now handled by gs_process_text().
        	- gs_release_text() added.
                - gs_xyshow_n_init() replace with gs_xyshow_begin().  Passing
        	  of x and y coordinates modified to support the new interface.
        	  Unfortunately, we need to transform the coordinates into the
                  space of the font scaling matrix, that is the current ctm for
                  xl when the the text is processed.  This differs from postscript
        	  which appears to have the regular user->device matrix in the
        	  graphics state during processing.
        	- (plfont.c) - gs_notify_init() is now part of the pfont
                  initialization procedure, related TODO: cut over to gs_font_alloc()
        	  and gs_font_base_alloc().
        
        - all gs files - removes uninitialized rcs identifiers.
        
        KNOWN PROBLEMS:
        
        occassional pxl and pcl crashes in gdev_mem_set_line_ptrs() when
        running in color due to null base (data) pointer.
        

Mon Sep 20 17:00:00 1999 GMT            marcos@artifex.com

        * pl.mak [1.13]:
        Changed version number.
        
Version 1.30 (08/25/99)
=======================

Wed Aug 25 17:00:00 1999 GMT        Marcos H. Woehrmann    marcos@artifex.com

        * plmain.h [1.5], plmain.c [1.15], pl.mak [1.11], pjparsei.c [1.2]:
        Added version number/build date to PJL code.

        * pl.mak [1.12]:
        Changed verion number.


Tue Aug 24 01:00:00 1999 GMT        Henry Stiles    henrys@artifex.com

        * plmain.c [1.14]:
        removes conditional debug flag.
        

Wed Jul 28 05:00:00 1999 GMT        Henry Stiles    henrys@artifex.com

        * plmain.c [1.13]:
        The page count was not reimplemented correctly when the code for
        seperate language instances was done.
        

Mon Jul 19 04:00:00 1999 GMT        Henry Stiles    henrys@artifex.com

        * plfont.c [1.5]:
        The intellifont cloning procedure was not properly handling compound
        characters it was treating all intellifont characters as non compound
        characters.
        

Thu Jun 17 20:00:00 1999 GMT        Henry Stiles    henrys@artifex.com

        * plfont.h [1.4], plfont.c [1.4]:
        releases pxl error page font and enumeration when shutting down an
        interpreter instance.  This required adding support to pl_font_t for
        fonts with permenent data (data that should not be freed).
        

Mon Jun 14 03:00:00 1999 GMT        Henry Stiles    henrys@artifex.com

        * plchar.c [1.6]:
        intellifont character width function was returning the width in
        intellifont design units.
        

Mon Jun  7 05:00:00 1999 GMT        Henry Stiles    henrys@artifex.com

        * pldebug.h [1.1], pl.mak [1.10]:
        adds debugging assertions for current devices while devices are being
        removed from the pcl interpreter's instance.
        

Sun Jun  6 08:00:00 1999 GMT        Henry Stiles    henrys@artifex.com

        * pltop.c [1.2]:
        Routine to deallocate the interpreter instance was trying to "reclaim"
        freed memory.
        

Sun Jun  6 04:00:00 1999 GMT        Henry Stiles    henrys@artifex.com

        * plchar.c [1.5]:
        As of gs library version 5.86, the log2_current_scale member of the
        gs_show_enum structure is renamed log2_scale.  Adds conditional
        compilation directives to determine the current library and the
        correct member name to use.  (peter)
        

Wed Jun  2 08:00:00 1999 GMT        Henry Stiles    henrys@artifex.com

        * plmain.c [1.12]:
        Usage print statement after an error processing the command line was
        missing the command name.
        

Wed Jun  2 03:00:00 1999 GMT            johnd@artifex.com

        * pltoputl.h [1.1], pltoputl.c [1.1], pltop.h [1.1], pltop.c [1.1], 
        plplatf.h [1.1], plplatf.c [1.1], plmain.c [1.11], plimpl.c [1.1], 
        pl.mak [1.9], pjtop.h [1.1], pjtop.c [1.1], pjparsei.c [1.1], 
        pjparse.h [1.6]:
        Initial checkin for multiple language support, shared devices,
        interpreter instances, interpreter initialization/de-initialization,
        etc.  A todo list of unfinished work is in pctop.c and pxtop.c.
        

Mon May 24 20:00:00 1999 GMT        Henry Stiles    henrys@artifex.com

        * plmain.c [1.10], plchar.c [1.4]:
        initial gs5.84 checkin with pcl and xl compiling.
        

Tue May 11 06:00:00 1999 GMT        Henry Stiles    henrys@artifex.com

        * pjparse.c [1.9]:
        not properly closing directories.
        

Mon Apr 26 07:00:00 1999 GMT        Henry Stiles    henrys@artifex.com

        * pjparse.c [1.8]:
        Modifications for RTL/GL2 mode, these changes are only relevant to RTL
        not pcl5c or pcl5e: (1) Adds rtl personality to pcl state and factory
        defaults (2) sets page size offsets to zero (3) changes clipping
        region to not use the pcl default setting of a 1/6" margin around the
        page (4) export pcl's new logical page and pcl's form feed procedure
        for use by gl/2's plot size (PS) and advance full page (PG) (5)
        Ignores text (6) Adds more implementations to plot size and advance
        page size (these commands are not complete) (7) defines rtl coordinate
        system for cases plot length < plot width and plot length > plot width
        (8) change gl/2 picture frame to have the same extant as the logical
        page size. (9) defaults gl/2's anchor point to have coordinate 0, 0
        (having no effect on the coordinate system).
        


Version 1.25 (02/24/99)
=======================

Wed Feb 24 11:00:00 1999        Henry Stiles        henrys@artifex.com

        * plfont.h [1.3], pjparse.h [1.5], pjparse.c [1.7]:
        Modifications to support PJL fontsource and fontnumber environment
        variables.

Thu Feb 18 23:00:00 1999                ray@artifex.com

        * plfont.c [1.3]:
        Change to '***_f' version of pl_font_glyph things to prevent conflict with
        NOPRIVATE (conflict in plchar.c)
        
        * pl.mak [1.8]:
        Fix to use correct INCLUDE macros (instead of hard coded '-I'). Needed for
        Watcom, VMS, etc.
        

Wed Feb 17 08:00:00 1999        Henry Stiles        henrys@artifex.com

        * pjparse.h [1.4], pjparse.c [1.6]:
        modifications to support PCLXL processing of PJL.
        

Thu Feb 11 18:00:00 1999                ray@artifex.com

        * pl.mak [1.7]:
        Remove the extra space after $(O_). This messes up platforms which cannot
        have a space. Correct fix is to define O_ correctly for platforms that
        require a space. See common/unixdefs.mak where O_=-o $(NULL).
        

Mon Feb  8 09:00:00 1999        Henry Stiles        henrys@artifex.com

        * plchar.c [1.3]:
        Quiets pcl in DEBUG mode.
        

Fri Feb  5 18:00:00 1999                marcos@artifex.com

        * pl.mak [1.6]:
        Added space for solaris gcc: $(O_) $(PCLOBJ).
        

Sun Jan 31 03:00:00 1999        Henry Stiles        henrys@artifex.com

        * plmain.c [1.9]:
        reverts to previous version.  Version needs more review.
        

Sun Jan 31 02:00:00 1999        Henry Stiles        henrys@artifex.com

        * plmain.c [1.8]:
        modifies argument processing so that we don't step on argv as we parse
        the data.
        

Thu Jan 14 08:00:00 1999        Henry Stiles        henrys@artifex.com

        * NEWS-PL [1.9]:
        chinook check-in.

Version 1.24 (01/14/99)
=======================

Mon Jan 11 20:00:00 1999        Henry Stiles        henrys@artifex.com

        * plmain.c [1.7]:
        restores memory status and user time that had been commented out
        before investigation of the the gs_stdout vs stdout problems.
        
        * plvocab.c [1.2]:
        removes PC specific keywords.

Mon Jan  4 14:00:00 1999        Henry Stiles        henrys@artifex.com

        * plmain.h [1.4], plmain.c [1.6]:
        Version number and build date for PCL.

Mon Dec 23 08:00:00 1998        Henry Stiles        henrys@artifex.com

        * plmain.h [1.3], plmain.c [1.5], pl.mak [1.5]:
        changes to use gs standard i/o - gs_stderr, gs_stdout, and gs_stderr.

Mon Dec  2 21:00:00 1998        Henry Stiles        henrys@artifex.com

        * NEWS-PL [1.8]:
        NEWS file update.

Version 1.23 (12/02/98)
======================

Thu Nov 26 19:54:16 1998  Henry Stiles  <henrys@meerkat>

	* pjparse.c, pjparse.h: pjl_compare() is now exported.

Version 1.22 (10/05/98)
=======================

Tue Nov  3 07:57:46 1998  Red Hat Linux User  <henrys@warthog>

	* pl.mak:
	removes leaf compiler flags which are not used by pcl, pxl or pl

Fri Oct 16 15:44:54 1998  Red Hat Linux User  <henrys@warthog>

	* pldraw.c, plfont.c, plfont.h, plmain.c, plmain.h, plchar.c:
	cleans up compiler warnings


Version 1.21 (10/05/98)
=======================

Mon Oct  5 08:07:30 1998  Red Hat Linux User  <henrys@warthog>

	* pjparse.c: stylistic changes affecting string lengths

	* pjparse.c, pjparse.h:
	new pjl parser for PDL settable pjl environment variables.

Sat Sep 26 19:13:48 1998  Red Hat Linux User  <henrys@warthog>

	* NEWS-PL: *** empty log message ***

	* pl.mak: changes to support msvc builds

Version 1.20 (9/24/98)
======================

Sat Sep 26 18:51:14 1998  Red Hat Linux User  <henrys@warthog>

	* pl.mak: changes to support msvc builds

Version 1.19 (8/17/98)
=======================

Changes:

- plmain.c: Adds include gsstruct.h

TODO:

- update include dependency lists in pl.mak

Version 1.18 (8/6/98)
=====================

Updates the makefile for the new directory structure in library version
5.30.  (pl.mak)

Changes (general improvements not associated with bugs):
    o mods for dictionary synonyms (originally implemented in 1.17)
	- pl_dict.c: pl_dict_put_links() and pl_dict_undef_purge_links()
	renamed to pl_dict_put_synonyms() and pl_dict_undef_purge_synonyms().
	- pl_dict.h: added interface document for adding a synonym to the
	dictionary.
	- pl_dict.c: renamed pl_dict_put_link() to pl_dict_put_synonym()
    o mods for font copying fonts (originally implemented in 1.17)
	- plchar.c: pl_font_add_glyph() no longer requires a
	size field for the data.  This is not necessary and broke the pl 
	interface with XL.
	- pcfont.h: no longer require glyph size in data type
	pl_font_glyph_t
	- plfont.c: pl_clone_font() code changes to support copying fonts
	without passing in the size of the glyph data  (see last 2 entries)
     o symbol set types
        - jan's additions to correct printable character ranges in symbol set's          as suggested by Peter plsymbol.c

Fixes for gs5.28 compatibility:
        - plmain.c: added gsmalloc.h for gs_memory_default and removed
	obsolete extern for gs_malloc_limit.

Version 1.17 (2/10/98)
=====================

Fixes bugs:
        - symbol set typos.
        - key mapping not using mod 64K arithmetic.  (plchar.c)

New stuff:
        - Updates the dictionary to support adding and deletion of
	aliases or links.  Supports new pcl command that can create aliases
	for font and macro id's PCL alphanumeric id data command (pldict.c,
	pldict.h)

        - Added copy font facilily to make a copy of a "plfont".
	Supports Assign font id to copy of current font (ESC * c 6 F).
	(plfont.c)

	- Moved intellifont code to pl to be consistant with the other
	fonts and to support copying of fonts. (plfont.c, plchar.c)

Version 1.16 (9/4/97)
=====================

Fixes bugs:
	- The Math-8 (8M) symbol set mapped many Greek characters to math
symbols rather than the Greek alphabet, and had a couple of other typos.
(plsymbol.c)
	- The Roman-8 (8U) symbol set mapped character 0x7e to the section
symbol rather than the tilde.  (plsymbol.c)
	- The width of an undefined TrueType glyph was returned as 0 rather
than as the width of glyph 0.  (plchar.c)
	- The Roman-8 (8U) symbol set was marked incorrectly as requiring
the PCL extensions (bit 25).  (plsymbol.c)

Adds the 0E (5) symbol set, an undocumented symbol set containing the
extended character set for the HP-GL/2 stick font.  (plsymbol.c)

Adds tracing (with -Zj / -ZJ) to the TrueType character mapper.  (plchar.c)

Version 1.15 (8/15/97)
======================

Fixes bugs:
	- The Deskop (7J) symbol set data were incorrect -- apparently a
copy of the Roman-8 data.  (plsymbol.c)
	- The entries for the ~ character in the ISO ASCII (0U) and
Norwegian (0D) symbol sets were incorrect.  (We suspect there are quite a
few more incorrect entries.)  (plsymbol.c)

Changes the computation of the nominal font width to use the 'x' character
rather than the space character, since the latter may be very narrow in some
proportionally spaced fonts.  (plfont.c)

Changes the character width/existence computation for TrueType fonts to
recognize 0 as denoting an undefined character.  (plchar.c)

Version 1.14 (5/12/97)
======================

Changes the pitch_100ths field of font parameters into two new fields:
pitch.cp (centipoints) and pitch.per_inch_x100 (character/inch * 100).
Previously there was confusion as to the meaning of pitch_100ths.  Note that
this is a NON-BACKWARD-COMPATIBLE change.  (plfont.h, plfont.c)

Version 1.13 (4/13/97)
======================

Fixes bugs:
	- The count of the number of entries in a dictionary wasn't
initialized.  (pldict.c)
	- The character complements for most of the symbol maps were wrong.
(They probably are still wrong, but they're closer to being right.)
(plsymbol.c)
	- Many occurrences of the DEGREE SIGN were incorrectly entered as
RING OPERATOR.  (plsymbol.c)
	- The map from MSL to Unicode was incomplete.  (plvocab.c)
	- The FontBBox for preloaded TrueType files contained garbage when
gs_type42_font_init was called, possibly causing a floating point exception.
(It was set to the correct value later.)  (plfont.c)

Makes the command line parser ignore -dBATCH, for compatibility with the
PostScript/PDF command line.  (plmain.c)

Adds a procedure for deleting a glyph from a font.  This is needed to
implement the corresponding PCL5 command.  (plfont.h, plchar.c)

Adds procedures for mapping between MSL and Unicode.  (plvocab.h, plvocab.c)

Exports the pl_font_lookup_glyph procedure so that the PCL5 Intellifont
rasterizer can call it.  (plfont.h, plchar.c)

Version 1.12 (3/26/97)
======================

This is the first numbered fileset.

Updates a get_outline procedure to match a change in the GS library.
(plchar.c)

Renames and restructures the makefile, in preparation for the move to CVS.
(pcllib.mak => pl.mak, pl_h.mak, pl_ugcc.mak, pl_watc.mak)

Pre-tracking changes
====================

Before 3/1/97, we did not track this library as a separate released object;
we included it in PCL5 and PCL XL releases.  Therefore, older changes are
noted only by date.

2/21/97
-------

Fixes bugs:
	- pl_dict_lookup returned false rather than NULL in the failure
case.  (This didn't affect its functioning, only its readability.)
(pldict.c)
	- The parameter lists for macros accessing font_char_width functions
were incorrect.  (plfont.h)
	- There was a duplicate entry for Unicode 19U.  (plsymbol.c)
	- TrueType fonts didn't set the pitch_100ths value in the font
structure.  (plfont.h, plfont.c)

Extends the dictionary interface to allow lookups with or without searching
the stack.  (pldict.h, pldict.c)

2/6/97
------

Fixes bugs:
	- In downloaded fonts with more than about 300 characters, some
characters could get lost.  (plchar.c)

1/30/97
-------

Adds recognition of @-files on the command line.  (pcllib.mak, plmain.h,
plmain.c)

1/24/97
-------

Adds a -K<maxK> switch to impose a limit on the total space allocated.
(plmain.c)

Includes the time and memory printing code even in non-DEBUG configurations.
(plmain.c)

1/21/97 (after PCL XL 1.08)
-------

Makes the command line interpreter recognize # as equivalent to =, to get
around the Watcom implementation's bug of making = equivalent to space.
(plmain.c)

1/18/97
-------

Makes available the procedure for looking up a value in a TrueType-style
cmap sub-table, since we plan to use it for mapping between glyph
vocabularies.  (plfont.h, plchar.c)

1/15/97
-------

Corrects some minor errors in the symbol sets, and resolves the issue of the
duplicate Desktop set.  (plsymbol.c)

1/13/97
-------

Updates the dingbats symbol sets to be more complete, and to use a MSL
mapping.  (plsymbol.c)

1/10/97
-------

Initializes the new library accurate curves flag to true.  (plmain.c)

1/9/97
------

Moves code for printing usage statistics (time, # of pages printed, memory
usage) into the library.  (plmain.h, plmain.c)

Limits the size of the initially allocated glyph tables, in case a client
asks for an unreasonably large one (as do some of the Genoa tests).
(plchar.c)

Corrects a misleading error message.  (plmain.c)

Greatly speeds up the generation of pseudo-bold characters, by replacing an
O(N) algorithm with an O(log N) one.  (plchar.c)
